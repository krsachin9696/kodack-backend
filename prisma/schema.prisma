
generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  userID       String   @id @default(uuid()) @db.Uuid
  name         String   @db.VarChar(100)
  username     String   @db.VarChar(50)
  email        String   @db.VarChar(100) @unique
  passwordHash String?   @db.VarChar(255)
  tokens       Json?    @db.Json
  otp          String?  @db.VarChar(6)
  otpExpiresAt DateTime? @db.Timestamp(6)
  otpVerified  Boolean  @default(false)
  createdAt    DateTime @default(now()) @db.Timestamp(6)
  updatedAt    DateTime @updatedAt @db.Timestamp(6)

  // Define the one-to-many relation
  lists        List[]   @relation("UserLists")
}

model List {
  listID      String    @id @default(uuid()) @db.Uuid
  name        String    @db.VarChar(150)
  visibility  Int  
  tags        Json?     @db.Json
  isDeleted   Boolean   @db.Boolean
  createdAt   DateTime  @default(now()) @db.Timestamp(6)
  updatedAt   DateTime  @updatedAt @db.Timestamp(6)

  // Foreign key field for the relation
  userID      String    @db.Uuid
  
  // Define the relation
  user        User      @relation("UserLists", fields: [userID], references: [userID])
}